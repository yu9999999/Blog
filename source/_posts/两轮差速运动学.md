---
title: 两轮差速运动学
date: 2023-12-05 11:19:42
tags:
---

**小知识：**
因为圆周弧长公式为：弧长=半径*角度
所以在同一时刻t下：线速度=半径*角速度（线速度也就是机器人行驶路径/时间，也就是弧长/t）

**定义符号：** 左轮速度vL，右轮速度vR，线速度v，角速度w，R为两轮中心运动半径，H为两轮距离。
已知机器人左右轮速，推导其线速度与角速度：
1.vL=vR时: 机器人作直线运动，此时没有角速度，v=vL=vR。画个图一目了然，不解释
2.vL!=vR时：
（1）当vL与vR为同方向时， 机器人做圆周运动 （圆弧运动），此时有w=vR/(R+H/2)=vL/(R-H/2)=v/R
（2）当vL、vR异号或其中一个为零时，此时R=H/2: 差动机器人作绕自身中心的自转(因为力矩中心位于机器人两轮中心)，机器人中处的线速度为零，其角速度为：w=2(vR-vL)/H，还是用小知识推导

现在只考虑机器人做圆周运动的情形，特殊情况参考以上公式：
通过左右轮速度求解v、w称为正运动学：
w=(vR-vL)/H
v=w*R=(vR+vL)/2
R=H(vR+vL)/(2vR-2vL)

通过v、w求解左右轮速度称为逆运动学：
vR=(R+H/2)w
vL=(R-H/2)w
R=v/w

探讨：如果已知同一坐标下两点位姿，如何求线速度与角速度？（这个一般用于规划好路径后再求速度，比如Teb，但是源码好像有点问题，线速度直接用两点距离dist去求了，应该用dist = fabs(angle_diff * dist/(2*sin(angle_diff/2)))更新为弧长距离）
已知两点位姿可以求出两点距离与角度，然后可以求出半径，然后再求出弧长，最后线速度与角速度都可以求出，然后转成左右轮速度发布下去，剩下的交给电机。

