---
title: 实体机器人相关问题与解决方案
date: 2023-10-19
tags:
- 机器人
categories:
- ROS与机器人相关问题
password: yz147258369
message: 保密
aside: false
---

## 1. 出现control loop miss ...  20hz警告

没有休眠所以出现警告，是因为计算时间太长所以没有休眠，程序无法修改优化情况下，删除或注释RCLCPP_INFO打印信息，如果进行原地旋转，每次进入transformposetobaseframe也耗时，所以尽量不要进入trans程序，可以在该程序设置条件限制

## 2. 出现failed to make progress错误

因为机器人在检查时，几秒钟没有动，可以修改参数movement_time_allowance

## 3. 机器人转向后起步不正常

研究发现是机器人转向后速度没有降为0，然后再走直线就会出现不正常现象。可以通过sleep解决,比如休眠1s
``` bash
$ sleep(1);
```
备注：也可以在速度上进行条件限制或者平滑

## 4. 机器人设置转向速度最高为0.6，但是实际运行只能达到0.3

因为电机不匹配，将控制频率从20hz降到10hz

## 5. xy_goal_tolerance设置过小时，机器人移动不平滑（dwb）

假设xy_goal_tolerance=0.5、max_vel_x=0.3、sim_time=1.6，则机器人在距离目标点0.5m发布速度为0。假设xy_goal_tolerance=0.2、max_vel_x=0.3、sim_time=1.6，则机器人在距离目标点0.48m开始减速（因为保持原速度，规划出的路线已经超过目标点，此时评分不是最优），直到距离目标点0.2m，机器人发布速度为0。所以当xy_goal_tolerance设置过小时，机器人发布的速度逐渐减小，该过程会导致机器人抖动。

解决办法：修改评分逻辑，具体不展示

## 6. 修改参数应进行本地实际机器人测试，否则配置镜像后，即使程序一样，但是配置参数文件不一样也会影响机器人实际运行效果，甚至无法让机器人前进

## 7. teb部分参数设置
（1）在同时配置RotationShimController和teb时，机器人会前进一会再旋转一会再前进，走走转转
原因：机器人角度与目标点角度大于一个值时，机器人会原地旋转，所以此时应该修改rotation源码，让机器人只在线速度<一定值时才进行原地旋转，反之机器人不进入rotation程序而进行teb规划。也可以去掉rotation插件，因为teb可以原地旋转
（2）global_plan_overwrite_orientation: true  #开启该功能，机器人不会在最后调整方向然后倒退，否则机器人会倒车入库
（3）机器人不走直线，左摇右摆：应该是teb规划的角速度波动过大，如何解决正在研究

